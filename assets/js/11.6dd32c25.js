(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{366:function(t,a,e){"use strict";e.r(a);var i=e(41),o=Object(i.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"struttura-del-pacchetto-fattura-elettronica"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#struttura-del-pacchetto-fattura-elettronica"}},[t._v("#")]),t._v(" Struttura del pacchetto Fattura Elettronica")]),t._v(" "),e("p",[t._v("Il pacchetto contiene una struttura di classi costruita sulla base del tracciato XML Fattura Elettronica così come ufficialmente documentato dall'Agenzia delle Entrate: "),e("a",{attrs:{href:"https://www.fatturapa.gov.it/export/fatturazione/it/normativa/f-2.htm",target:"_blank",rel:"noopener noreferrer"}},[t._v("Documentazione FatturaPA Agenzia delle Entrate"),e("OutboundLink")],1),t._v(" Il riferimento ufficiale utilizzato per la lettura e la scrittura di file XML è: "),e("code",[t._v("Rappresentazione tabellare del tracciato FatturaPA versione 1.2.1.xls")]),t._v(".")]),t._v(" "),e("h2",{attrs:{id:"dati-enumerabili"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dati-enumerabili"}},[t._v("#")]),t._v(" Dati enumerabili")]),t._v(" "),e("p",[t._v("L'XML della fattura elettronica prevede diversi dati enumerabili: alcuni sono indicati in apposite tabelle ("),e("code",[t._v("RegimeFiscale")]),t._v(", "),e("code",[t._v("TipoCassa")]),t._v(", ecc.), altri sono invece riportati nei campi in cui vengono utilizzati (tipo sconto/maggiorazione, quantità di soci, ecc.).")]),t._v(" "),e("p",[t._v("Ognuno di questi dati è tradotto in una apposita classe "),e("code",[t._v("Enum")]),t._v(" nel namespace "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Enums")]),t._v(".")]),t._v(" "),e("ul",[e("li",[t._v("Socio unico/più soci: "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Enums\\AssociateType")])]),t._v(" "),e("li",[t._v("Tipo cessione/prestazione: "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Enums\\CancelType")])]),t._v(" "),e("li",[t._v("Tipo ritenuta: "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Enums\\DeductionType")])]),t._v(" "),e("li",[t._v("Tipo sconto/maggiorazione: "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Enums\\DiscountType")])]),t._v(" "),e("li",[t._v("Formato documento: "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Enums\\DocumentFormat")])]),t._v(" "),e("li",[t._v("Tipo documento: "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Enums\\DocumentType")])]),t._v(" "),e("li",[t._v("Individuazione soggetto emittente: "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Enums\\EmittingSubject")])]),t._v(" "),e("li",[t._v("Tipo cassa previdenziale: "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Enums\\FundType")])]),t._v(" "),e("li",[t._v("Metodo di pagamento: "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Enums\\PaymentMethod")])]),t._v(" "),e("li",[t._v("Termini di pagamento: "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Enums\\PaymentTerm")])]),t._v(" "),e("li",[t._v("Codici destinatario di default (cliente estero o codice destinatario B2B/B2C sconosciuto o non presente): "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Enums\\RecipientCode")])]),t._v(" "),e("li",[t._v("Regime fiscale: "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Enums\\TaxRegime")])]),t._v(" "),e("li",[t._v("Formato trasmissione: "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Enums\\TransmissionFormat")])]),t._v(" "),e("li",[t._v("Esigibilità IVA: "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Enums\\VatEligibility")])]),t._v(" "),e("li",[t._v("Tipologia di Natura IVA: "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Enums\\VatNature")])]),t._v(" "),e("li",[t._v("Stato liquidazione: "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Enums\\WoundUpType")])])]),t._v(" "),e("h2",{attrs:{id:"struttura-base"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#struttura-base"}},[t._v("#")]),t._v(" Struttura base")]),t._v(" "),e("p",[t._v("La classe di base da utilizzare è "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\DigitalDocument")]),t._v(", che rappresenta un intero file XML (o p7m) di una Fattura Elettronica.")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$eDocument")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("FatturaElettronicaPhp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("FatturaElettronica"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("DigitalDocument")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseFrom")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$xml")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("Un'istanza di "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\DigitalDocument")]),t._v(" contiene essenzialmente le due parti principali di un XML:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("1 <FatturaElettronicaHeader>")])]),t._v(" "),e("li",[e("code",[t._v("2 <FatturaElettronicaBody>")])])]),t._v(" "),e("h3",{attrs:{id:"header"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#header"}},[t._v("#")]),t._v(" Header")]),t._v(" "),e("p",[t._v("I dati dell'intestazione del documento elettronico sono espressi proprietà della classe "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\DigitalDocument")]),t._v(" con i relativi metodi le lettura e scrittura (get/set/add).")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("1.1 <DatiTrasmissione>")]),t._v(" "),e("ul",[e("li",[t._v("I dati relativi a questo nodo sono espressi in metodi disponibili nella classe "),e("code",[t._v("DigitalDocument")])])])]),t._v(" "),e("li",[e("code",[t._v("1.2 <CedentePrestatore>")]),t._v(" (o Fornitore)\n"),e("ul",[e("li",[t._v("Istanza di "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Supplier")])])])]),t._v(" "),e("li",[e("code",[t._v("1.3 <RappresentanteFiscale>")]),t._v(" "),e("ul",[e("li",[t._v("Istanza di "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Customer")])])])]),t._v(" "),e("li",[e("code",[t._v("1.4 <CessionarioCommittente>")]),t._v(" "),e("ul",[e("li",[t._v("Istanza di "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\BillablePerson")])])])]),t._v(" "),e("li",[e("code",[t._v("1.5 <TerzoIntermediarioOSoggettoEmittente>")]),t._v(" "),e("ul",[e("li",[t._v("Istanza di "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Intermediary")])])])]),t._v(" "),e("li",[e("code",[t._v("1.6 <SoggettoEmittente>")]),t._v(" "),e("ul",[e("li",[t._v("Istanza di "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\BillablePerson")])])])])]),t._v(" "),e("p",[t._v("La classe "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Address")]),t._v(" rappresenta un Indirizzo utilizzato in ognuna delle classi sopra citate.")]),t._v(" "),e("h3",{attrs:{id:"corpo-fattura"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#corpo-fattura"}},[t._v("#")]),t._v(" Corpo fattura")]),t._v(" "),e("p",[t._v("Ogni file XML può contenere una o più fatture elettroniche grazie alla presenza di uno o più nodi "),e("code",[t._v("<FatturaElettronicaBody>")]),t._v(". Quindi l'istanza di "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\DigitalDocument")]),t._v(" contiene una collezione di "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\DigitalDocumentInstance")]),t._v(". Ognuno di essi rappresenta appunto un "),e("code",[t._v("<FatturaElettronicaBody>")]),t._v(".")]),t._v(" "),e("p",[t._v("I dati presenti in "),e("code",[t._v("2.1.1 <DatiGeneraliDocumento>")]),t._v(" sono rappresentati in proprietà disponibili in "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\DigitalDocumentInstance")]),t._v(". Alcuni di essi sono collezioni di istanze di altri oggetti che a loro volta contengono i dati previsti dall'XML.")]),t._v(" "),e("p",[t._v("Le linee del corpo fattura ("),e("code",[t._v("2.2 <DatiBeniServizi>")]),t._v(") sono rappresentate dalla collezione di istanze di "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Line")]),t._v(".")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Fund")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("2.1.1.7 <DatiCassaPrevidenziale>")])])])]),t._v(" "),e("li",[e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Discount")]),t._v(", utilizzata per esprimere uno o più sconti (collezione) per i nodi:\n"),e("ul",[e("li",[e("code",[t._v("2.1.1.8 <ScontoMaggiorazione>")])]),t._v(" "),e("li",[e("code",[t._v("2.2.1.10 <ScontoMaggiorazione>")])])])]),t._v(" "),e("li",[e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\RelatedDocument")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("2.1.3 <DatiContratto>")])]),t._v(" "),e("li",[e("code",[t._v("2.1.4 <DatiConvenzione>")])]),t._v(" "),e("li",[e("code",[t._v("2.1.5 <DatiRicezione>")])]),t._v(" "),e("li",[e("code",[t._v("2.1.6 <DatiFattureCollegate>")])])])]),t._v(" "),e("li",[e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\ShippingLabel")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("2.1.8 <DatiDDT>")])])])]),t._v(" "),e("li",[e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Shipment")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("2.1.9 <DatiTrasporto>")])])])]),t._v(" "),e("li",[e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Total")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("2.2.2 <DatiRiepilogo>")])])])]),t._v(" "),e("li",[e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\PaymentInfo")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("2.4 <DatiPagamento>")])]),t._v(" "),e("li",[t._v("A sua volta contiene una o più istanze di "),e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\PaymentDetails")]),t._v(" che corrisponde a "),e("code",[t._v("2.4.2 <DettaglioPagamento>")])])])]),t._v(" "),e("li",[e("code",[t._v("FatturaElettronicaPhp\\FatturaElettronica\\Attachment")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("2.5 <Allegati>")])])])])])])}),[],!1,null,null,null);a.default=o.exports}}]);